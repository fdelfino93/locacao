===================================================================
                    DOCUMENTAÃ‡ÃƒO TÃ‰CNICA - COBIMOB
                    Sistema de GestÃ£o de LocaÃ§Ãµes
===================================================================

ÃšLTIMA ATUALIZAÃ‡ÃƒO: 06 de Janeiro de 2025
VERSÃƒO DO SISTEMA: 1.0.0

===================================================================
                        ÃNDICE
===================================================================

1. VISÃƒO GERAL DO SISTEMA
2. ARQUITETURA E TECNOLOGIAS
3. ESTRUTURA DE PASTAS
4. BACKEND - API FASTAPI
5. FRONTEND - REACT/TYPESCRIPT
6. BANCO DE DADOS - SQL SERVER
7. INTEGRAÃ‡Ã•ES E CONEXÃ•ES
8. ENDPOINTS DA API
9. COMPONENTES DO FRONTEND
10. SCRIPTS E MIGRAÃ‡Ã•ES
11. CONFIGURAÃ‡ÃƒO E DEPLOY
12. PLANOS DE LOCAÃ‡ÃƒO
13. FLUXO DE DADOS
14. SEGURANÃ‡A E VALIDAÃ‡Ã•ES

===================================================================
                    1. VISÃƒO GERAL DO SISTEMA
===================================================================

O COBIMOB Ã© um sistema completo de gestÃ£o de locaÃ§Ãµes imobiliÃ¡rias 
que permite:

- Cadastro de Clientes (ProprietÃ¡rios)
- Cadastro de Inquilinos
- GestÃ£o de ImÃ³veis
- Controle de Contratos
- PrestaÃ§Ã£o de Contas automatizada
- GeraÃ§Ã£o de relatÃ³rios (Excel/PDF)

O sistema foi desenvolvido com arquitetura moderna usando:
- Backend em Python/FastAPI
- Frontend em React/TypeScript
- Interface dupla: Streamlit (legado) + React (moderna)
- Banco de dados SQL Server
- Design responsivo com Tailwind CSS + ShadCN
- AnimaÃ§Ãµes com Framer Motion

===================================================================
                    2. ARQUITETURA E TECNOLOGIAS
===================================================================

BACKEND:
- Python 3.8+
- FastAPI 0.104.1 (API REST)
- Uvicorn (Servidor ASGI)
- Pydantic (ValidaÃ§Ã£o de dados)
- PyODBC (ConexÃ£o com SQL Server)
- Pandas (ManipulaÃ§Ã£o de dados)
- ReportLab (GeraÃ§Ã£o de PDFs)
- OpenPyXL (GeraÃ§Ã£o de Excel)
- Python-dotenv (VariÃ¡veis de ambiente)

FRONTEND:
- React 19.1.0
- TypeScript 5.8.3
- Vite 7.0.4 (Build tool)
- Tailwind CSS 3.4.17
- ShadCN UI (Componentes)
- Radix UI (Componentes base)
- Framer Motion 12.23.12 (AnimaÃ§Ãµes)
- Lucide React (Ãcones)

BANCO DE DADOS:
- Microsoft SQL Server
- Tabelas: Clientes, Inquilinos, Imoveis, Contratos, Pagamentos
- Stored Procedures para relatÃ³rios complexos
- Ãndices otimizados para performance

INTERFACE LEGADO:
- Streamlit (app.py) - Interface administrativa
- Componentes Python para formulÃ¡rios

===================================================================
                    3. ESTRUTURA DE PASTAS
===================================================================

Locacao/
â”œâ”€â”€ ğŸ“ locacao/                    # MÃ³dulo principal backend
â”‚   â””â”€â”€ ğŸ“ repositories/           # Camada de dados
â”‚       â”œâ”€â”€ cliente_repository.py  # CRUD de clientes
â”‚       â”œâ”€â”€ inquilino_repository.py# CRUD de inquilinos
â”‚       â”œâ”€â”€ imovel_repository.py   # CRUD de imÃ³veis
â”‚       â”œâ”€â”€ contrato_repository.py # CRUD de contratos
â”‚       â””â”€â”€ prestacao_contas_repository.py # RelatÃ³rios
â”‚
â”œâ”€â”€ ğŸ“ frontend/                   # AplicaÃ§Ã£o React moderna
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/         # Componentes React
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ forms/          # FormulÃ¡rios especÃ­ficos
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ sections/       # SeÃ§Ãµes de pÃ¡gina
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ ui/             # Componentes base UI
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/           # IntegraÃ§Ã£o com API
â”‚   â”‚   â””â”€â”€ ğŸ“ types/              # TypeScript interfaces
â”‚   â””â”€â”€ ğŸ“¦ package.json            # DependÃªncias Node.js
â”‚
â”œâ”€â”€ ğŸ“ pages/                      # Interface Streamlit (legado)
â”‚   â”œâ”€â”€ cadastro_cliente.py       # PÃ¡gina de cadastro cliente
â”‚   â”œâ”€â”€ cadastro_inquilino.py     # PÃ¡gina de cadastro inquilino
â”‚   â”œâ”€â”€ cadastro_imovel.py        # PÃ¡gina de cadastro imÃ³vel
â”‚   â”œâ”€â”€ cadastro_contrato.py      # PÃ¡gina de cadastro contrato
â”‚   â””â”€â”€ prestacao_contas.py       # RelatÃ³rios Streamlit
â”‚
â”œâ”€â”€ ğŸ“ components/                 # Componentes Streamlit
â”‚   â””â”€â”€ form_components.py         # Widgets reutilizÃ¡veis
â”‚
â”œâ”€â”€ ğŸ“ scripts/                    # Scripts de banco e migraÃ§Ã£o
â”‚   â”œâ”€â”€ migration_*.py             # Scripts de migraÃ§Ã£o
â”‚   â”œâ”€â”€ test_*.py                  # Scripts de teste
â”‚   â””â”€â”€ analyze_database.py       # AnÃ¡lise de performance
â”‚
â”œâ”€â”€ ğŸ app.py                      # AplicaÃ§Ã£o Streamlit principal
â”œâ”€â”€ ğŸš€ main.py                     # API FastAPI principal
â”œâ”€â”€ ğŸ“‹ requirements.txt            # DependÃªncias Python
â””â”€â”€ ğŸ“„ .env                        # ConfiguraÃ§Ãµes ambiente

===================================================================
                    4. BACKEND - API FASTAPI
===================================================================

ARQUIVO PRINCIPAL: main.py
- ConfiguraÃ§Ã£o FastAPI com CORS
- Middleware de seguranÃ§a
- ValidaÃ§Ã£o Pydantic
- Tratamento de exceÃ§Ãµes
- Logging estruturado

MODELOS PYDANTIC:
- ClienteCreate: ValidaÃ§Ã£o de dados de cliente
- InquilinoCreate: ValidaÃ§Ã£o de dados de inquilino
- ImovelCreate: ValidaÃ§Ã£o de dados de imÃ³vel
- ContratoCreate: ValidaÃ§Ã£o de dados de contrato
- Modelos para PrestaÃ§Ã£o de Contas

REPOSITÃ“RIOS (Repository Pattern):

ğŸ“ cliente_repository.py:
- get_conexao(): ConexÃ£o com banco
- buscar_clientes(): Lista todos os clientes
- buscar_cliente_por_id(): Busca cliente especÃ­fico
- inserir_cliente(): Cadastro novo cliente

ğŸ“ inquilino_repository.py:
- OperaÃ§Ãµes CRUD para inquilinos
- ValidaÃ§Ã£o CPF/CNPJ
- GestÃ£o de fiadores e moradores

ğŸ“ imovel_repository.py:
- OperaÃ§Ãµes CRUD para imÃ³veis
- AssociaÃ§Ã£o com cliente/inquilino
- Controle de status e valores

ğŸ“ contrato_repository.py:
- GestÃ£o completa de contratos
- CÃ¡lculo de reajustes
- Controle de datas de vigÃªncia

ğŸ“ prestacao_contas_repository.py:
- RelatÃ³rios mensais complexos
- GeraÃ§Ã£o de Excel/PDF
- CÃ¡lculos financeiros automatizados
- HistÃ³rico de pagamentos

CARACTERÃSTICAS TÃ‰CNICAS:
- Pool de conexÃµes otimizado
- TransaÃ§Ãµes atomicas
- PrevenÃ§Ã£o SQL Injection
- ValidaÃ§Ã£o de regras de negÃ³cio
- Logging de auditoria
- Tratamento robusto de erros

===================================================================
                    5. FRONTEND - REACT/TYPESCRIPT
===================================================================

ESTRUTURA PRINCIPAL:

ğŸ“ src/App.tsx:
- Roteamento entre formulÃ¡rios
- NavegaÃ§Ã£o com animaÃ§Ãµes
- Estado global da aplicaÃ§Ã£o
- Layout responsivo

ğŸ“ services/api.ts:
- Classe ApiService centralizada
- InterceptaÃ§Ã£o de requests
- Tratamento de erros HTTP
- Proxy para desenvolvimento

ğŸ“ types/index.ts:
- Interfaces TypeScript completas
- Tipos para Cliente, Inquilino, ImÃ³vel, Contrato
- ValidaÃ§Ãµes de tipos em tempo de compilaÃ§Ã£o

FORMULÃRIOS PRINCIPAIS:

ğŸ“ components/forms/ModernClienteFormV2.tsx:
- FormulÃ¡rio multi-etapa para clientes
- ValidaÃ§Ã£o em tempo real
- Suporte PF/PJ com representante legal
- IntegraÃ§Ã£o com API de CEP

ğŸ“ components/forms/ModernInquilinoFormV2.tsx:
- Cadastro completo de inquilinos
- Sistema de fiadores
- Cadastro de moradores
- ValidaÃ§Ãµes especÃ­ficas

ğŸ“ components/forms/ModernImovelForm.tsx:
- Dados completos do imÃ³vel
- CÃ¡lculos automÃ¡ticos
- Upload de documentos
- GeocodificaÃ§Ã£o de endereÃ§os

ğŸ“ components/forms/ModernContratoForm.tsx:
- Planos de locaÃ§Ã£o estruturados
- CÃ¡lculo de valores automÃ¡tico
- Datas de vigÃªncia inteligentes
- Preview do contrato

COMPONENTES UI (ShadCN):
- Button: BotÃµes com variaÃ§Ãµes
- Input: Campos de entrada validados
- Select: Seletores customizados
- Checkbox: Checkboxes estilizados
- Label: Labels semÃ¢nticos
- Textarea: Ãreas de texto

SEÃ‡Ã•ES ESPECIAIS:

ğŸ“ components/sections/PrestacaoContas.tsx:
- Interface para relatÃ³rios
- Filtros avanÃ§ados
- ExportaÃ§Ã£o Excel/PDF
- VisualizaÃ§Ã£o de dados

ğŸ“ components/sections/Hero.tsx:
- Landing page do sistema
- Call-to-action
- ApresentaÃ§Ã£o das funcionalidades

CARACTERÃSTICAS TÃ‰CNICAS:
- TypeScript strict mode
- Componentes funcionais com hooks
- Estado local com useState
- Efeitos com useEffect
- FormulÃ¡rios controlados
- ValidaÃ§Ã£o client-side
- Responsive design mobile-first
- Acessibilidade (WCAG 2.1)
- Performance otimizada

===================================================================
                    6. BANCO DE DADOS - SQL SERVER
===================================================================

TABELAS PRINCIPAIS:

ğŸ—ƒï¸ Clientes:
- id (PK, IDENTITY)
- nome, cpf_cnpj, telefone, email
- endereco (texto livre - serÃ¡ migrado)
- tipo_recebimento, conta_bancaria
- dados_empresa, representante
- informaÃ§Ãµes do cÃ´njuge
- preferÃªncias de seguro
- data_nascimento, nacionalidade, estado_civil

ğŸ—ƒï¸ Inquilinos:
- id (PK, IDENTITY)
- dados pessoais completos
- tipo_garantia, responsÃ¡vel por utilidades
- dados de moradores e pets
- informaÃ§Ãµes empresariais (PJ)
- fiador vinculado

ğŸ—ƒï¸ Imoveis:
- id (PK, IDENTITY)
- id_cliente, id_inquilino (FK)
- tipo, endereco, valores (aluguel, IPTU, condomÃ­nio)
- status, matricula_imovel
- dados de utilidades (Copel, Sanepar, gÃ¡s)
- permite_pets, observaÃ§Ãµes

ğŸ—ƒï¸ Contratos:
- id (PK, IDENTITY)  
- id_imovel, id_inquilino (FK)
- datas (inÃ­cio, fim, assinatura, reajustes)
- taxas e percentuais
- tipo_plano_locacao, valores_contrato
- seguros e garantias
- clausulas_adicionais

ğŸ—ƒï¸ Pagamentos:
- id (PK, IDENTITY)
- id_contrato (FK)
- mes_referencia, ano_referencia
- valores (bruto, lÃ­quido, descontos)
- status_pagamento
- observaÃ§Ãµes

TABELAS DE APOIO (Novas - MigraÃ§Ã£o):

ğŸ—ƒï¸ Enderecos:
- EndereÃ§os estruturados
- CEP, cidade, estado separados
- GeocodificaÃ§Ã£o

ğŸ—ƒï¸ DadosBancarios:
- InformaÃ§Ãµes bancÃ¡rias estruturadas
- PIX, TED, contas especÃ­ficas
- ValidaÃ§Ãµes bancÃ¡rias

ğŸ—ƒï¸ PlanosLocacao:
- Planos prÃ©-definidos
- Percentuais por categoria
- ConfiguraÃ§Ãµes flexÃ­veis

ÃNDICES OTIMIZADOS:
- IX_Clientes_CPF_CNPJ (Ãºnico)
- IX_Contratos_Datas (composto)
- IX_Pagamentos_Referencia (composto)
- IX_Imoveis_Status (filtro)

PROCEDURES:
- SP_RelatorioMensal
- SP_CalculoReajuste
- SP_PrestacaoContas

===================================================================
                    7. INTEGRAÃ‡Ã•ES E CONEXÃ•ES
===================================================================

FLUXO DE DADOS:

Frontend React â†” API FastAPI â†” SQL Server
     â†“
Streamlit App â†” Repositories â†” SQL Server

CONEXÃ•ES ESPECÃFICAS:

ğŸ”— Frontend â†’ Backend:
- Proxy Vite (localhost:5173 â†’ localhost:8000)
- Headers CORS configurados
- Interceptadores de erro
- Retry automÃ¡tico

ğŸ”— Backend â†’ Banco:
- PyODBC connection pool
- String de conexÃ£o via .env
- TransaÃ§Ãµes atomicas
- Prepared statements

ğŸ”— APIs Externas:
- ViaCEP (busca de endereÃ§os)
- APIs bancÃ¡rias (validaÃ§Ã£o)
- GeocodificaÃ§Ã£o (futuro)

CONFIGURAÃ‡ÃƒO DE AMBIENTE:

ğŸ“„ .env (Backend):
```
DB_DRIVER=ODBC Driver 17 for SQL Server
DB_SERVER=localhost
DB_DATABASE=Cobimob
DB_USER=usuario
DB_PASSWORD=senha
```

ğŸ“„ frontend/.env:
```
VITE_API_URL=http://localhost:8000
VITE_ENV=development
```

SEGURANÃ‡A:
- ValidaÃ§Ã£o de input em todas as camadas
- SanitizaÃ§Ã£o de dados SQL
- Headers de seguranÃ§a HTTP
- AutenticaÃ§Ã£o JWT (futuro)
- Rate limiting (futuro)

===================================================================
                    8. ENDPOINTS DA API
===================================================================

BASE URL: http://localhost:8000

ğŸŒ ENDPOINTS GERAIS:
GET  /                    # Status da API
GET  /health             # Health check

ğŸ‘¥ CLIENTES:
POST /api/clientes       # Criar cliente
GET  /api/clientes       # Listar clientes

ğŸ  INQUILINOS:
POST /api/inquilinos     # Criar inquilino  
GET  /api/inquilinos     # Listar inquilinos

ğŸ˜ï¸ IMÃ“VEIS:
POST /api/imoveis        # Criar imÃ³vel
GET  /api/imoveis        # Listar imÃ³veis

ğŸ“ CONTRATOS:
POST /api/contratos      # Criar contrato
GET  /api/contratos      # Listar contratos

ğŸ“Š PRESTAÃ‡ÃƒO DE CONTAS:
GET  /api/prestacao-contas/clientes
     # Lista clientes com contratos

GET  /api/prestacao-contas/{id_cliente}/{ano}/{mes}
     # Dados de prestaÃ§Ã£o mensal

GET  /api/prestacao-contas/{id_cliente}/historico
     # HistÃ³rico de prestaÃ§Ãµes

POST /api/prestacao-contas/lancamentos
     # Criar lanÃ§amento lÃ­quido

POST /api/prestacao-contas/descontos
     # Criar desconto/deduÃ§Ã£o

PUT  /api/prestacao-contas/pagamento-detalhes
     # Atualizar detalhes pagamento

ğŸ“„ RELATÃ“RIOS:
GET  /api/prestacao-contas/{id_cliente}/{ano}/{mes}/relatorio/excel
     # Download Excel

GET  /api/prestacao-contas/{id_cliente}/{ano}/{mes}/relatorio/pdf
     # Download PDF

FORMATO DE RESPOSTA:
```json
{
  "data": [...],
  "message": "OperaÃ§Ã£o realizada com sucesso",
  "success": true
}
```

TRATAMENTO DE ERROS:
- Status HTTP apropriados (400, 404, 500)
- Mensagens descritivas
- Logging detalhado
- Stack trace em desenvolvimento

===================================================================
                    9. COMPONENTES DO FRONTEND
===================================================================

ğŸ¨ COMPONENTES UI BASE:

ğŸ“ components/ui/button.tsx:
- Variantes: default, destructive, outline, secondary
- Tamanhos: sm, md, lg, xl
- Estados: loading, disabled
- Acessibilidade completa

ğŸ“ components/ui/input.tsx:
- Input bÃ¡sico estilizado
- ValidaÃ§Ã£o visual
- Estados de erro
- Suporte a Ã­cones

ğŸ“ components/ui/input-with-icon.tsx:
- Input com Ã­cone integrado
- MÃ¡scaras de formato
- ValidaÃ§Ã£o em tempo real

ğŸ“ components/ui/select.tsx:
- Select customizado Radix UI
- Busca integrada
- Multi-seleÃ§Ã£o
- Virtualization para listas grandes

ğŸ”§ FORMULÃRIOS ESPECÃFICOS:

ğŸ“ ModernClienteFormV2.tsx:
SEÃ‡Ã•ES:
1. Dados Pessoais/Empresariais
2. EndereÃ§o (com CEP automÃ¡tico)
3. Dados BancÃ¡rios estruturados
4. PreferÃªncias de seguro
5. ObservaÃ§Ãµes

CARACTERÃSTICAS:
- ValidaÃ§Ã£o CPF/CNPJ em tempo real
- Toggle PF/PJ dinÃ¢mico
- Busca CEP automÃ¡tica
- Dados do cÃ´njuge condicionais
- Preview dos dados antes de enviar

ğŸ“ ModernInquilinoFormV2.tsx:
SEÃ‡Ã•ES:
1. IdentificaÃ§Ã£o principal
2. EndereÃ§o e contato  
3. Dados profissionais
4. Sistema de fiadores
5. Cadastro de moradores
6. InformaÃ§Ãµes sobre pets
7. Responsabilidade por utilidades

CARACTERÃSTICAS:
- Fiador opcional estruturado
- Lista dinÃ¢mica de moradores
- CÃ¡lculo de dependentes
- ValidaÃ§Ãµes especÃ­ficas por tipo

ğŸ“ ModernImovelForm.tsx:
SEÃ‡Ã•ES:
1. Dados bÃ¡sicos do imÃ³vel
2. Valores e taxas
3. InformaÃ§Ãµes de utilidades
4. DocumentaÃ§Ã£o
5. ObservaÃ§Ãµes e restriÃ§Ãµes

CARACTERÃSTICAS:
- SeleÃ§Ã£o de cliente/inquilino
- CÃ¡lculos automÃ¡ticos de valores
- ValidaÃ§Ã£o de matrÃ­culas
- Upload de documentos

ğŸ“ ModernContratoForm.tsx:
SEÃ‡Ã•ES:
1. Partes envolvidas
2. PerÃ­odo e reajustes
3. Planos de locaÃ§Ã£o
4. Valores estruturados
5. Seguros e garantias
6. AntecipaÃ§Ãµes e retidos
7. ClÃ¡usulas adicionais

CARACTERÃSTICAS:
- SeleÃ§Ã£o de planos prÃ©-definidos
- CÃ¡lculo automÃ¡tico de valores
- Datas inteligentes
- Preview do contrato

ğŸ–¼ï¸ SEÃ‡Ã•ES DE INTERFACE:

ğŸ“ components/sections/Hero.tsx:
- Landing page com animaÃ§Ãµes
- Call-to-action principal
- ApresentaÃ§Ã£o das funcionalidades
- Design moderno gradiente

ğŸ“ components/sections/FormNavigation.tsx:
- NavegaÃ§Ã£o entre formulÃ¡rios
- Progress indicator
- Responsivo mobile
- AnimaÃ§Ãµes suaves

ğŸ“ components/sections/PrestacaoContas.tsx:
- Seletor de cliente
- Filtros de perÃ­odo
- Tabela de dados financeiros
- BotÃµes de exportaÃ§Ã£o
- GrÃ¡ficos de resumo (futuro)

===================================================================
                    10. SCRIPTS E MIGRAÃ‡Ã•ES
===================================================================

ğŸ“ scripts/migration_001_clientes_melhorias.py:
FUNCIONALIDADES:
- CriaÃ§Ã£o de tabelas estruturadas
- MigraÃ§Ã£o de dados existentes
- ValidaÃ§Ã£o de integridade
- Backup automÃ¡tico
- Rollback em caso de erro

NOVAS TABELAS CRIADAS:
- Enderecos (endereÃ§os estruturados)
- DadosBancarios (dados bancÃ¡rios detalhados)  
- RepresentantesLegais (para empresas)
- PlanosLocacao (planos prÃ©-definidos)

ğŸ“ scripts/test_*.py:
- test_basic_functions.py: Testes de conectividade
- test_cliente_v2.py: Testes de CRUD cliente
- test_performance.py: Testes de performance
- final_comprehensive_test.py: SuÃ­te completa

ğŸ“ scripts/analyze_database.py:
ANÃLISES:
- Ãndices ausentes
- Queries lentas
- FragmentaÃ§Ã£o de tabelas
- EstatÃ­sticas de uso
- RecomendaÃ§Ãµes de otimizaÃ§Ã£o

ğŸ“ scripts/diagnostic_complete.py:
DIAGNÃ“STICOS:
- Conectividade
- Estrutura de tabelas
- Integridade referencial
- Performance queries
- RelatÃ³rio detalhado

EXECUÃ‡ÃƒO DE SCRIPTS:
```bash
# MigraÃ§Ã£o
python scripts/migration_001_clientes_melhorias.py

# Testes
python scripts/test_basic_functions.py

# AnÃ¡lise
python scripts/analyze_database.py
```

===================================================================
                    11. CONFIGURAÃ‡ÃƒO E DEPLOY
===================================================================

ğŸ BACKEND SETUP:
```bash
# Instalar dependÃªncias
pip install -r requirements.txt

# Configurar .env
cp .env.example .env

# Executar migraÃ§Ãµes
python scripts/migration_001_clientes_melhorias.py

# Iniciar API
python main.py
# ou
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

âš›ï¸ FRONTEND SETUP:
```bash
cd frontend

# Instalar dependÃªncias
npm install

# Configurar ambiente
cp .env.example .env.local

# Modo desenvolvimento
npm run dev

# Build produÃ§Ã£o
npm run build
```

ğŸ–¥ï¸ STREAMLIT (LEGADO):
```bash
# Executar interface administrativa
streamlit run app.py --server.port 8501
```

ğŸ—„ï¸ BANCO DE DADOS:
1. Instalar SQL Server
2. Criar database "Cobimob"
3. Executar scripts de migraÃ§Ã£o
4. Configurar usuÃ¡rio de aplicaÃ§Ã£o
5. Configurar conexÃ£o no .env

ğŸ“¦ DEPLOY PRODUÃ‡ÃƒO:

OPÃ‡Ã•ES RECOMENDADAS:
- Backend: Docker + Azure App Service
- Frontend: Vercel ou Netlify
- Banco: Azure SQL Database
- Arquivos: Azure Blob Storage

DOCKER:
```dockerfile
# Dockerfile backend
FROM python:3.11-slim
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 8000
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

===================================================================
                    12. PLANOS DE LOCAÃ‡ÃƒO
===================================================================

O sistema implementa planos estruturados de locaÃ§Ã£o:

ğŸ¢ LOCAÃ‡ÃƒO COMPLETO - OPÃ‡ÃƒO 1:
- Primeiro aluguel: 100% de taxa
- Demais aluguÃ©is: 10% de taxa
- ServiÃ§os completos incluÃ­dos

ğŸ¢ LOCAÃ‡ÃƒO COMPLETO - OPÃ‡ÃƒO 2:
- Todos os aluguÃ©is: 16% de taxa
- DistribuiÃ§Ã£o uniforme
- ServiÃ§os completos incluÃ­dos

ğŸ  LOCAÃ‡ÃƒO BÃSICO - OPÃ‡ÃƒO 1:
- Primeiro aluguel: 50% de taxa
- Demais aluguÃ©is: 5% de taxa
- ServiÃ§os bÃ¡sicos

ğŸ  LOCAÃ‡ÃƒO BÃSICO - OPÃ‡ÃƒO 2:
- Todos os aluguÃ©is: 8% de taxa
- DistribuiÃ§Ã£o uniforme
- ServiÃ§os bÃ¡sicos

CARACTERÃSTICAS DOS PLANOS:
- AntecipaÃ§Ã£o de encargos configurÃ¡vel
- Sistema de retidos flexÃ­vel
- CÃ¡lculos automÃ¡ticos
- PersonalizaÃ§Ã£o por contrato

ANTECIPAÃ‡Ã•ES POSSÃVEIS:
- CondomÃ­nio
- Seguro fianÃ§a
- Seguro incÃªndio
- IPTU (conforme contrato)

RETIDOS POSSÃVEIS:
- FCI (Fundo de Combate Ã  InadimplÃªncia)
- CondomÃ­nio
- Seguros
- Taxas administrativas

===================================================================
                    13. FLUXO DE DADOS
===================================================================

ğŸ“Š FLUXO PRINCIPAL DE CADASTROS:

1. CLIENTE (ProprietÃ¡rio):
   - Dados pessoais/empresariais
   - EndereÃ§o estruturado
   - Dados bancÃ¡rios para recebimento
   - PreferÃªncias de seguro
   â†“
2. INQUILINO:
   - IdentificaÃ§Ã£o completa
   - Dados financeiros
   - Sistema de garantias (fiador)
   - Moradores e pets
   â†“
3. IMÃ“VEL:
   - AssociaÃ§Ã£o cliente/inquilino
   - CaracterÃ­sticas fÃ­sicas
   - Valores e utilidades
   - Status e documentaÃ§Ã£o
   â†“
4. CONTRATO:
   - LigaÃ§Ã£o imÃ³vel/inquilino
   - Plano de locaÃ§Ã£o escolhido
   - Datas e reajustes
   - Seguros e garantias
   â†“
5. PRESTAÃ‡ÃƒO DE CONTAS:
   - CÃ¡lculos mensais automÃ¡ticos
   - RelatÃ³rios detalhados
   - HistÃ³rico completo

ğŸ’° FLUXO FINANCEIRO:

ENTRADA â†’ Aluguel do inquilino
  â†“
CÃLCULOS â†’ Taxa de administraÃ§Ã£o (conforme plano)
  â†“
DESCONTOS â†’ CondomÃ­nio, IPTU, seguros (se antecipados)
  â†“
RETIDOS â†’ FCI, taxas, reparos
  â†“
LÃQUIDO â†’ Valor a ser repassado ao proprietÃ¡rio

ğŸ“ˆ FLUXO DE RELATÃ“RIOS:

1. Sistema coleta dados do mÃªs
2. Aplica regras do plano de locaÃ§Ã£o
3. Calcula valores bruto/lÃ­quido
4. Gera relatÃ³rio estruturado
5. Exporta Excel/PDF
6. Registra histÃ³rico

===================================================================
                    14. SEGURANÃ‡A E VALIDAÃ‡Ã•ES
===================================================================

ğŸ”’ VALIDAÃ‡Ã•ES BACKEND:

DADOS PESSOAIS:
- CPF: ValidaÃ§Ã£o de dÃ­gitos verificadores
- CNPJ: ValidaÃ§Ã£o completa com pesos
- Email: Formato RFC 5322
- Telefone: PadrÃµes brasileiros
- CEP: Formato 00000-000

REGRAS DE NEGÃ“CIO:
- Unicidade CPF/CNPJ por tabela
- Datas de contrato consistentes
- Valores monetÃ¡rios positivos
- Relacionamentos obrigatÃ³rios vÃ¡lidos

BANCO DE DADOS:
- Prepared statements (proteÃ§Ã£o SQL Injection)
- TransaÃ§Ãµes atomicas
- ValidaÃ§Ã£o de constraints
- Auditoria de operaÃ§Ãµes

ğŸ›¡ï¸ VALIDAÃ‡Ã•ES FRONTEND:

TEMPO REAL:
- FormataÃ§Ã£o automÃ¡tica CPF/CNPJ
- ValidaÃ§Ã£o de email
- MÃ¡scaras de input
- Feedback visual imediato

SUBMIT:
- ValidaÃ§Ã£o completa antes envio
- ConfirmaÃ§Ã£o de dados crÃ­ticos
- Tratamento de erros da API
- Retry automÃ¡tico em falhas

SEGURANÃ‡A UI:
- SanitizaÃ§Ã£o de inputs
- ProteÃ§Ã£o XSS
- ValidaÃ§Ã£o de tipos TypeScript
- Headers de seguranÃ§a

ğŸ” CONFIGURAÃ‡Ã•ES DE SEGURANÃ‡A:

CORS:
- Origins especÃ­ficos permitidos
- Headers controlados
- Methods limitados

HEADERS HTTP:
- Content-Type validation
- CSRF protection (futuro)
- Rate limiting (futuro)

LOGS:
- Registro de todas as operaÃ§Ãµes
- IdentificaÃ§Ã£o de usuÃ¡rio (futuro)
- Monitoramento de erros
- Alertas de seguranÃ§a

===================================================================
                        NOTAS TÃ‰CNICAS
===================================================================

PERFORMANCE:
- Pool de conexÃµes DB otimizado
- Queries indexadas
- Cache de dados frequentes (futuro)
- PaginaÃ§Ã£o em listagens grandes
- Lazy loading de componentes

MANUTENIBILIDADE:
- CÃ³digo TypeScript tipado
- Repository pattern
- Separation of concerns
- DocumentaÃ§Ã£o inline
- Testes automatizados

ESCALABILIDADE:
- Arquitetura modular
- APIs stateless
- Database connection pooling
- Horizontal scaling ready

PRÃ“XIMAS MELHORIAS:
- AutenticaÃ§Ã£o JWT
- Sistema de permissÃµes
- NotificaÃ§Ãµes push
- Dashboard analytics  
- Mobile app (React Native)
- IntegraÃ§Ã£o contÃ¡bil
- Assinatura digital
- Portal do inquilino

===================================================================
SUPORTE TÃ‰CNICO: fernando@cobimob.com
VERSÃƒO: 1.0.0 - Janeiro 2025
===================================================================